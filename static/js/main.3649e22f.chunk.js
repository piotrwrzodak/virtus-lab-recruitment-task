(this["webpackJsonpvirtus-lab"]=this["webpackJsonpvirtus-lab"]||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(9),s=r.n(a),i=r(2),o="data",u="characters",l="films",d="loading",h=function(e){return"[".concat(u,"] ").concat(e)},j=(h("Fetch characters"),h("Set characters")),b=h("Load more characters"),f=function(e){return"[".concat(d,"] ").concat(e)},m=f("Start loading"),v=f("End loading"),O=function(){return{type:m,payload:!0}},p=function(){return{type:v,payload:!1}},x=function(e){return{type:j,payload:e}},y=function(){return{type:b}},g=function(e){return"[".concat(l,"] ").concat(e)},_=(g("Fetch films"),g("Set films")),N=function(){return function(e){fetch("https://swapi.dev/api/films").then((function(e){return e.json()})).then((function(t){return e((r=t.results,{type:_,payload:r}));var r}))}};function S(){return function(e){e((function(e){e(O()),fetch("https://swapi.dev/api/people").then((function(e){return e.json()})).then((function(t){e(x(t)),e(p())}))})),e(N())}}var B=function(e){return e.data},w=function(e,t){var r;return null===(r=B(e).characters.characters)||void 0===r?void 0:r.slice(0,t)},C=function(e,t){var r;return null===(r=w(e,t))||void 0===r?void 0:r.sort((function(e,t){return F(e,t)}))},I=function(e,t){var r;return null===(r=w(e,t))||void 0===r?void 0:r.sort((function(e,t){return e.name<t.name?1:t.name<e.name?-1:0}))},L=function(e,t){var r;return null===(r=w(e,t))||void 0===r?void 0:r.sort((function(e,t){return e.gender>t.gender?1:t.gender>e.gender?-1:F(e,t)}))},E=function(e,t){var r;return null===(r=w(e,t))||void 0===r?void 0:r.sort((function(e,t){return e.gender<t.gender?1:t.gender<e.gender?-1:F(e,t)}))},k=function(e,t){var r=w(e,t),n=/[0-9]+/,c=[],a=[];return null===r||void 0===r||r.map((function(e){return"unknown"===e.birth_year?c.push(e):a.push(e)})),null===c||void 0===c||c.sort((function(e,t){return F(e,t)})),null===a||void 0===a||a.sort((function(e,t){return parseInt(e.birth_year.match(n))>parseInt(t.birth_year.match(n))?1:parseInt(e.birth_year.match(n))<parseInt(t.birth_year.match(n))?-1:F(e,t)})),null===a||void 0===a?void 0:a.concat(c)},D=function(e,t){var r;return null===(r=k(e,t))||void 0===r?void 0:r.reverse()},M=function(e){return B(e).characters.possibleLoadMore},A=function(e){return B(e).characters.count},F=function(e,t){return e.name>t.name?1:-1},G=function(e){return B(e).loading},Y=r(5),R=function(e){return B(e).films},J=r(0);var T=function(e){var t=e.attribute,r=e.value;return Object(J.jsxs)("div",{className:"general-info",children:[Object(J.jsx)("h1",{className:"general-info__attribute",children:t}),Object(J.jsx)("h1",{className:"general-info__value",children:r})]})};var X=function(e){var t=e.character,r=e.films,c=e.show,a=e.toggle,s=c?"modal modal--show":"modal modal--hide",i=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){i.current.contains(e.target)||a()};return c?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[c,a]),c&&Object(J.jsx)("div",{className:s,children:Object(J.jsx)("div",{className:"modal-main",ref:i,children:Object(J.jsxs)("div",{className:"info-container",children:[Object(J.jsx)(T,{attribute:"Name:",value:t.name}),Object(J.jsx)(T,{attribute:"Gender:",value:t.gender}),Object(J.jsx)(T,{attribute:"Birth year:",value:t.birth_year}),Object(J.jsx)(T,{attribute:"Mass: ",value:t.mass}),Object(J.jsx)(T,{attribute:"Height:",value:t.height}),Object(J.jsx)(T,{attribute:"Films:",value:r.map((function(e){return t.films.includes(e.url)?Object(J.jsx)("li",{className:"general-info__value",children:e.title},e.url+t.url):null}))}),Object(J.jsx)("button",{className:"button",type:"button",onClick:a,children:"Close"})]})})})},H=Object(i.b)((function(e){return{films:R(e)}}),null)(X);var P=function(e){var t=e.character,r=Object(n.useState)(!1),c=Object(Y.a)(r,2),a=c[0],s=c[1],i=function(){s(!a)};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("li",{className:"character",onClick:i,children:[Object(J.jsx)("h1",{children:t.name}),Object(J.jsx)("h2",{children:t.gender}),Object(J.jsx)("h2",{children:t.birth_year})]}),Object(J.jsx)(H,{character:t,show:a,toggle:i})]})};var U=function(e){var t=e.charactersSortedByNameAsc,r=e.charactersSortedByNameDesc,n=e.charactersSortedByGenderAsc,c=e.charactersSortedByGenderDesc,a=e.charactersSortedByBirthYearAsc,s=e.charactersSortedByBirthYearDesc,i=e.searchInput,o=e.currentListOfCharacters,u=e.setCurrentListOfCharacters,l=e.filmInput;return Object(J.jsxs)("ul",{className:"character-list",children:[Object(J.jsxs)("div",{className:"character character--col-names",children:[Object(J.jsx)("h2",{onClick:function(){u(o===t?r:t)},children:"Name"}),Object(J.jsx)("h2",{onClick:function(){u(o===n?c:n)},children:"Gender"}),Object(J.jsx)("h2",{onClick:function(){u(o===a?s:a)},children:"Birth year"})]}),null===o||void 0===o?void 0:o.map((function(e){return l.url&&e.name.match(new RegExp("".concat(i),"i"))&&e.films.includes(l.url)||!l.url&&e.name.match(new RegExp("".concat(i),"i"))?Object(J.jsx)(P,{character:e},e.name):null}))]})},V=Object(i.b)((function(e){return{count:A(e),initialCharacters:w(e,e.data.characters.count),charactersSortedByNameAsc:C(e,e.data.characters.count),charactersSortedByNameDesc:I(e,e.data.characters.count),charactersSortedByGenderAsc:L(e,e.data.characters.count),charactersSortedByGenderDesc:E(e,e.data.characters.count),charactersSortedByBirthYearAsc:k(e,e.data.characters.count),charactersSortedByBirthYearDesc:D(e,e.data.characters.count),loading:G(e)}}),null)(U);var W=function(e){var t,r=e.searchInput,c=e.setSearchInput,a=e.filmInput,s=e.setFilmInput,i=e.films,o=Object(n.useState)(!1),u=Object(Y.a)(o,2),l=u[0],d=u[1],h=function(e){s(e),d(!l)};return Object(J.jsxs)("div",{className:"filter-section",children:[Object(J.jsx)("input",{type:"text",className:"searchbar",placeholder:"Search..",value:r,onChange:function(e){c(e.target.value)}}),Object(J.jsxs)("div",{className:"dropdown",children:[Object(J.jsx)("button",{type:"button",className:"dropdown__header",onClick:function(){return d(!l)},children:Object(J.jsx)("h3",{className:"dropdown__header-title",children:null!==(t=a.title)&&void 0!==t?t:a})}),l&&Object(J.jsxs)("div",{role:"list",className:"dropdown__list",children:[a.url&&Object(J.jsx)("button",{type:"button",className:"dropdown__list__item",onClick:function(){return h("Filter by films")},children:"Reset filter"}),null===i||void 0===i?void 0:i.map((function(e){return Object(J.jsx)("button",{type:"button",className:"dropdown__list__item",onClick:function(){return h(e)},children:e.title},e.url)}))]})]})]})},q=Object(i.b)((function(e){return{films:R(e)}}),null)(W);var z=function(e){var t=e.initialCharacters,r=e.loadMore,c=e.possibleLoadMore,a=e.count,s=e.loading,i=Object(n.useState)(null),o=Object(Y.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(""),h=Object(Y.a)(d,2),j=h[0],b=h[1],f=Object(n.useState)("Filter by films"),m=Object(Y.a)(f,2),v=m[0],O=m[1];return Object(n.useEffect)((function(){l(t)}),[t,a,s]),s?Object(J.jsx)("div",{className:"container",children:Object(J.jsx)("h1",{className:"loading-header",children:"Loading..."})}):Object(J.jsxs)("div",{className:"container",children:[u&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(q,{searchInput:j,setSearchInput:b,filmInput:v,setFilmInput:O}),Object(J.jsx)(V,{searchInput:j,currentListOfCharacters:u,setCurrentListOfCharacters:l,filmInput:v})]}),u&&c&&Object(J.jsx)("button",{className:"button button--load-more",onClick:r,children:"Load more"})]})},K=Object(i.b)((function(e){return{initialCharacters:w(e,e.data.characters.count),charactersSortedByNameAsc:C(e,e.data.characters.count),charactersSortedByNameDesc:I(e,e.data.characters.count),charactersSortedByGenderAsc:L(e,e.data.characters.count),charactersSortedByGenderDesc:E(e,e.data.characters.count),charactersSortedByBirthYearAsc:k(e,e.data.characters.count),charactersSortedByBirthYearDesc:D(e,e.data.characters.count),possibleLoadMore:M(e),count:A(e),loading:G(e)}}),(function(e){return{loadMore:function(){return e((function(e,t){e(O());var r=t();if(r.data.characters.count%10===0){var n=r.data.characters.characters.length/10+1;r.data.characters.possibleLoadMore&&fetch("https://swapi.dev/api/people/?page=".concat(n)).then((function(e){return e.json()})).then((function(t){e(x(t))})),e(y()),e(p())}else e(y()),e(p())}))}}}))(z);var Q=function(){return Object(J.jsxs)("div",{className:"header",children:[Object(J.jsx)("h1",{className:"header__heading--one",children:"Star Wars"}),Object(J.jsx)("h3",{className:"header__heading--two",children:"Characters Catalogue"})]})};var Z,$=function(e){var t=e.init;return Object(n.useEffect)((function(){t()}),[t]),Object(J.jsxs)("div",{className:"app",children:[Object(J.jsx)(Q,{}),Object(J.jsx)(K,{})]})},ee=Object(i.b)(null,(function(e,t){return{init:function(){return e(S())}}}))($),te=(r(28),r(3)),re=r(16),ne=r(4),ce=r(6),ae=r(8),se={},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case j:var c=n.results.map((function(e){return{name:(t=e).name,gender:t.gender,birth_year:t.birth_year,mass:t.mass,height:t.height,films:t.films};var t}));return Object(ae.a)(Object(ae.a)({},e),{},{characters:e.characters?[].concat(Object(ce.a)(e.characters),Object(ce.a)(c)):Object(ce.a)(c),count:e.count?e.count:10,possibleLoadMore:!!n.next});case b:return Object(ae.a)(Object(ae.a)({},e),{},{count:e.count+5});default:return e}},oe=[],ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case _:var c=n.map((function(e){return{title:(t=e).title,url:t.url};var t}));return Object(ce.a)(c);default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case m:case v:return n;default:return e}},de=Object(te.c)((Z={},Object(ne.a)(Z,u,ie),Object(ne.a)(Z,l,ue),Object(ne.a)(Z,d,le),Z)),he=Object(te.c)(Object(ne.a)({},o,de)),je=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d)(te.a.apply(void 0,[re.a])),be=Object(te.e)(he,{},je);s.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(i.a,{store:be,children:Object(J.jsx)(ee,{})})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3649e22f.chunk.js.map